branches:
  only:
    - master

language:
  - python

sudo:
  - required

services:
  - docker

python:
  - "2.7"
  - "3.6"

before_install
  - sudo apt-get update -qq
install:
  - pip install cython
  - pip install coverage coveralls # for CI

script:
  - make compile
  - coverage run --source=fastmat util/bee.py test -v
after_success: >
  if [[ "$TRAVIS_PYTHON_VERSION" == "3.6" ]]; then
    coveralls
  fi

before_deploy:
  - pip install cibuildwheel==0.5.1
 
 deploy:
  - cibuildwheel --output-dir wheelhouse

